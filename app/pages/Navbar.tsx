"use client";
import React, { useEffect, useRef, useState } from "react";
import Link from "next/link";
import { usePathname, useRouter } from "next/navigation";
import { Menu } from "lucide-react";
import { motion } from "framer-motion";
import Image from "next/image";

interface NavigationBarProps {
  className?: string;
}



export default function NavigationBar({ className = "" }: NavigationBarProps) {
  const [isMenuOpen, setIsMenuOpen] = useState<boolean>(false);
  const [isMobileMenuDropdownOpen, setIsMobileMenuDropdownOpen] = useState<boolean>(false);
  const [isMenuButtonHovered, setIsMenuButtonHovered] = useState<boolean>(false);
  const [isContactButtonHovered, setIsContactButtonHovered] = useState<boolean>(false);
  const [isMobileMenuButtonHovered, setIsMobileMenuButtonHovered] = useState<boolean>(false);
  const [isMobileContactButtonHovered, setIsMobileContactButtonHovered] = useState<boolean>(false);

  // בדיקה אם זה מובייל
  const isMobile = typeof window !== 'undefined' && window.innerWidth <= 768;

  const router = useRouter();
  const pathname = usePathname();

  // Scroll/Navigate to donations section
  const goToDonationSection = (): void => {
    try {
      const el = typeof document !== 'undefined' ? document.getElementById('תרומה') : null;
      if (el && pathname === '/') {
        el.scrollIntoView({ behavior: 'smooth', block: 'start' });
      } else {
        router.push('/#תרומה', { scroll: true });
      }
    } catch {}
  };

  // Force scroll to top on initial load/refresh
  useEffect(() => {
    if (typeof window !== 'undefined') {
      window.scrollTo({ top: 0, behavior: 'auto' });
    }
  }, []);


  const menuItems = [
    { 
      title: "הפעילות שלנו", 
      url: "#הפעילות-שלנו",
      icon: (
        <motion.svg 
          width="20" 
          height="20" 
          viewBox="0 0 1024 1024" 
          className="shrink-0"
          whileHover={{ 
            scale: 1.2,
            rotate: 15,
            transition: { duration: 0.3, ease: "easeInOut" }
          }}
          animate={{
            y: [0, -3, 0],
            transition: { 
              duration: 2, 
              repeat: Infinity, 
              ease: "easeInOut" 
            }
          }}
        >
          <path d="M512 301.2m-10 0a10 10 0 1 0 20 0 10 10 0 1 0-20 0Z" fill="#E73B37" />
          <path d="M400.3 744.5c2.1-0.7 4.1-1.4 6.2-2-2 0.6-4.1 1.3-6.2 2z m0 0c2.1-0.7 4.1-1.4 6.2-2-2 0.6-4.1 1.3-6.2 2z" fill="#39393A" />
          <path d="M511.8 256.6c24.4 0 44.2 19.8 44.2 44.2S536.2 345 511.8 345s-44.2-19.8-44.2-44.2 19.9-44.2 44.2-44.2m0-20c-35.5 0-64.2 28.7-64.2 64.2s28.7 64.2 64.2 64.2 64.2-28.7 64.2-64.2-28.7-64.2-64.2-64.2z" fill="#E73B37" />
          <path d="M730.7 529.5c0.4-8.7 0.6-17.4 0.6-26.2 0-179.6-86.1-339.1-219.3-439.5-133.1 100.4-219.2 259.9-219.2 439.5 0 8.8 0.2 17.5 0.6 26.1-56 56-90.6 133.3-90.6 218.7 0 61.7 18 119.1 49.1 167.3 30.3-49.8 74.7-90.1 127.7-115.3 39-18.6 82.7-29 128.8-29 48.3 0 93.9 11.4 134.3 31.7 52.5 26.3 96.3 67.7 125.6 118.4 33.4-49.4 52.9-108.9 52.9-173.1 0-85.4-34.6-162.6-90.5-218.6zM351.1 383.4c9.2-37.9 22.9-74.7 40.6-109.5a502.1 502.1 0 0 1 63.6-95.9c17.4-20.6 36.4-39.9 56.8-57.5 20.4 17.6 39.4 36.9 56.8 57.5 24.8 29.5 46.2 61.8 63.6 95.9 17.7 34.8 31.4 71.6 40.6 109.5 8.7 35.8 13.5 72.7 14.2 109.9C637.4 459 577 438.9 512 438.9c-65 0-125.3 20.1-175.1 54.4 0.7-37.2 5.5-74.1 14.2-109.9z m-90.6 449.2c-9.1-27-13.7-55.5-13.7-84.4 0-35.8 7-70.6 20.8-103.2 8.4-19.8 19-38.4 31.9-55.5 9.7 61.5 29.5 119.7 57.8 172.6-36.4 17.8-69 41.6-96.8 70.5z m364.2-85.3c-0.7-0.3-1.5-0.5-2.2-0.8-0.4-0.2-0.9-0.3-1.3-0.5-0.6-0.2-1.3-0.5-1.9-0.7-0.8-0.3-1.5-0.5-2.3-0.8-0.8-0.3-1.5-0.5-2.3-0.7l-0.9-0.3c-1-0.3-2.1-0.7-3.1-1-1.2-0.4-2.4-0.7-3.5-1.1l-3-0.9c-0.2-0.1-0.4-0.1-0.7-0.2-1.1-0.3-2.3-0.7-3.4-1-1.2-0.3-2.4-0.6-3.5-0.9l-3.6-0.9-3.6-0.9c-1-0.3-2.1-0.5-3.1-0.7-1.2-0.3-2.4-0.5-3.6-0.8-1.3-0.3-2.5-0.6-3.8-0.8h-0.3c-0.9-0.2-1.9-0.4-2.8-0.6-0.4-0.1-0.7-0.1-1.1-0.2-1.1-0.2-2.2-0.4-3.4-0.6-1.2-0.2-2.4-0.4-3.6-0.7l-5.4-0.9c-0.9-0.1-1.9-0.3-2.8-0.4-0.8-0.1-1.6-0.3-2.5-0.4-2.6-0.4-5.1-0.7-7.7-1-1.2-0.1-2.3-0.3-3.5-0.4h-0.4c-0.9-0.1-1.8-0.2-2.8-0.3-1.1-0.1-2.1-0.2-3.2-0.3-1.7-0.2-3.4-0.3-5.1-0.4-0.8-0.1-1.5-0.1-2.3-0.2-0.9-0.1-1.9-0.1-2.8-0.2-0.4 0-0.8 0-1.2-0.1-1.1-0.1-2.1-0.1-3.2-0.2-0.5 0-1-0.1-1.5-0.1-1.3-0.1-2.6-0.1-3.9-0.1-0.8 0-1.5-0.1-2.3-0.1-1.2 0-2.4 0-3.5-0.1h-13.9c-2.3 0-4.6 0.1-6.9 0.2-0.9 0-1.9 0.1-2.8 0.1-0.8 0-1.5 0.1-2.3 0.1-1.4 0.1-2.8 0.2-4.1 0.3-1.4 0.1-2.7 0.2-4.1 0.4-0.6 0-1.2 0.1-1.8 0.2l-7.8 0.9c-1.1 0.1-2.1 0.3-3.2 0.4-1 0.1-2.1 0.3-3.1 0.4-3.2 0.5-6.4 0.9-9.5 1.5-0.7 0.1-1.4 0.2-2.1 0.4-0.9 0.1-1.7 0.3-2.6 0.5-1.1 0.2-2.3 0.4-3.4 0.6-0.9 0.2-1.7 0.3-2.6 0.5-0.4 0.1-0.8 0.1-1.1 0.2-0.7 0.1-1.4 0.3-2.1 0.4-1.2 0.3-2.4 0.5-3.6 0.8-1.2 0.3-2.4 0.5-3.6 0.8-0.2 0-0.4 0.1-0.6 0.1-0.5 0.1-1 0.2-1.5 0.4-1.1 0.3-2.3 0.6-3.5 0.9-1.3 0.3-2.5 0.6-3.8 1-0.4 0.1-0.9 0.2-1.4 0.4-1.3 0.4-2.7 0.7-4 1.1-1.5 0.4-3 0.9-4.6 1.3-1 0.3-2.1 0.6-3.1 1-2.1 0.6-4.1 1.3-6.2 2-0.7 0.2-1.4 0.5-2.1 0.7-15-27.5-27.4-56.4-37-86.2-11.7-36.1-19.2-73.6-22.5-111.6-0.6-6.7-1-13.3-1.3-20-0.1-1.2-0.1-2.4-0.1-3.6-0.1-1.2-0.1-2.4-0.1-3.6 0-1.2-0.1-2.4-0.1-3.7 18.8-14 39.2-25.8 61-35 36.1-15.3 74.5-23 114.1-23 39.6 0 78 7.8 114.1 23 21.8 9.2 42.2 20.9 61 35v0.1c0 1 0 1.9-0.1 2.9 0 1.4-0.1 2.8-0.1 4.3 0 0.7 0 1.3-0.1 2-0.1 1.8-0.1 3.5-0.2 5.3-0.3 6.7-0.8 13.3-1.3 20-3.3 38.5-11 76.5-23 113-9.7 30.3-22.3 59.4-37.6 87.1z m136.8 90.9a342.27 342.27 0 0 0-96.3-73.2c29.1-53.7 49.5-112.8 59.4-175.5 12.8 17.1 23.4 35.6 31.8 55.5 13.8 32.7 20.8 67.4 20.8 103.2 0 31-5.3 61.3-15.7 90z" fill="#39393A" />
          <path d="M512 819.3c8.7 0 24.7 22.9 24.7 60.4s-16 60.4-24.7 60.4-24.7-22.9-24.7-60.4 16-60.4 24.7-60.4m0-20c-24.7 0-44.7 36-44.7 80.4 0 44.4 20 80.4 44.7 80.4s44.7-36 44.7-80.4c0-44.4-20-80.4-44.7-80.4z" fill="#E73B37" />
        </motion.svg>
      )
    },
    { 
      title: "תמונות ווידאו", 
      url: "#תמונות-ווידאו",
      icon: (
        <motion.svg 
          width="20" 
          height="20" 
          viewBox="0 0 24 24" 
          fill="none" 
          className="shrink-0"
          whileHover={{ 
            scale: 1.2,
            rotate: 15,
            transition: { duration: 0.3, ease: "easeInOut" }
          }}
          animate={{
            y: [0, -3, 0],
            transition: { 
              duration: 2, 
              repeat: Infinity, 
              ease: "easeInOut" 
            }
          }}
        >
          <path d="M16 10L18.5768 8.45392C19.3699 7.97803 19.7665 7.74009 20.0928 7.77051C20.3773 7.79703 20.6369 7.944 20.806 8.17433C21 8.43848 21 8.90095 21 9.8259V14.1741C21 15.099 21 15.5615 20.806 15.8257C20.6369 16.056 20.3773 16.203 20.0928 16.2295C19.7665 16.2599 19.3699 16.022 18.5768 15.5461L16 14M6.2 18H12.8C13.9201 18 14.4802 18 14.908 17.782C15.2843 17.5903 15.5903 17.2843 15.782 16.908C16 16.4802 16 15.9201 16 14.8V9.2C16 8.0799 16 7.51984 15.782 7.09202C15.5903 6.71569 15.2843 6.40973 14.908 6.21799C14.4802 6 13.9201 6 12.8 6H6.2C5.0799 6 4.51984 6 4.09202 6.21799C3.71569 6.40973 3.40973 6.71569 3.21799 7.09202C3 7.51984 3 8.07989 3 9.2V14.8C3 15.9201 3 16.4802 3.21799 16.908C3.40973 17.2843 3.71569 17.5903 4.09202 17.782C4.51984 18 5.07989 18 6.2 18Z" stroke="#000000" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
        </motion.svg>
      )
    },
    { 
      title: "משפחות מספרות", 
      url: "#משפחות-מספרות",
      icon: (
        <motion.svg 
          width="20" 
          height="20" 
          viewBox="0 0 400 400" 
          className="shrink-0"
          whileHover={{ 
            scale: 1.2,
            rotate: 15,
            transition: { duration: 0.3, ease: "easeInOut" }
          }}
          animate={{
            y: [0, -3, 0],
            transition: { 
              duration: 2, 
              repeat: Infinity, 
              ease: "easeInOut" 
            }
          }}
        >
          <path d="M109.898 84.7631C116.133 78.2322 120.869 74.9778 129.644 72.3269C166.695 61.134 172.838 123.951 144.841 140.865C108.776 162.652 82.0567 113.856 107.448 91.4799" stroke="#000000" strokeOpacity="0.9" strokeWidth="16" strokeLinecap="round" strokeLinejoin="round"/>
          <path d="M267.376 100.825C276.854 93.0418 293.219 89.1778 305.67 94.1604C345.865 110.245 323.884 164.372 283.601 158.999C256.449 155.378 257.945 105.639 279.059 97.1891" stroke="#000000" strokeOpacity="0.9" strokeWidth="16" strokeLinecap="round" strokeLinejoin="round"/>
          <path d="M189.401 187.114C198.189 180.136 213.365 176.672 224.909 181.139C262.181 195.56 241.799 244.088 204.446 239.27C179.269 236.024 180.655 191.43 200.234 183.855" stroke="#000000" strokeOpacity="0.9" strokeWidth="16" strokeLinecap="round" strokeLinejoin="round"/>
          <path d="M87 272.568C88.4259 269.79 87 211 106.5 175C110.333 193.667 112.7 255.2 109.5 266M164.673 235.998C158.567 229.025 150.117 185.093 149.5 179C146.667 193 142.7 243.7 143.5 262.5" stroke="#000000" strokeOpacity="0.9" strokeWidth="16" strokeLinecap="round" strokeLinejoin="round"/>
          <path d="M325.264 281.568C313.092 283.494 305.051 284.677 301.141 285.119C280.846 287.41 273.888 287.278 271.759 287.278C267.642 287.278 294.164 175.651 301.141 175.651C305.792 175.651 325.264 244.5 354.499 285.119" stroke="#000000" strokeOpacity="0.9" strokeWidth="16" strokeLinecap="round" strokeLinejoin="round"/>
          <path d="M109.027 265.186C107.05 278.393 106.061 294.134 106.061 312.411C106.061 330.687 107.05 347.93 109.027 364.138L97.4336 366.349" stroke="#000000" strokeOpacity="0.9" strokeWidth="16" strokeLinecap="round" strokeLinejoin="round"/>
          <path d="M143 265C146 274.969 147.5 288.354 147.5 305.155C147.5 321.957 146 339.905 143 359H152" stroke="#000000" strokeOpacity="0.9" strokeWidth="16" strokeLinecap="round" strokeLinejoin="round"/>
          <path d="M160.035 234.954C165.283 244.584 169.072 249.826 171.405 250.68C173.737 251.534 179.978 253.268 190.129 255.884M231.377 253.498C240.953 252.046 247.199 250.039 250.114 247.477C253.03 244.916 256.236 242.307 259.735 239.652" stroke="#000000" strokeOpacity="0.9" strokeWidth="16" strokeLinecap="round" strokeLinejoin="round"/>
          <path d="M190.366 258.209L197.133 300.272L190.366 347.744L172.987 320.427L164.673 317.621" stroke="#000000" strokeOpacity="0.9" strokeWidth="16" strokeLinecap="round" strokeLinejoin="round"/>
          <path d="M230.169 252.395L219.159 300.705L230.169 341.93L248.939 315.38L258.575 312.434" stroke="#000000" strokeOpacity="0.9" strokeWidth="16" strokeLinecap="round" strokeLinejoin="round"/>
          <path d="M291.035 287.279V369.47L281.761 371" stroke="#000000" strokeOpacity="0.9" strokeWidth="16" strokeLinecap="round" strokeLinejoin="round"/>
          <path d="M316.54 283.791V371H325.814" stroke="#000000" strokeOpacity="0.9" strokeWidth="16" strokeLinecap="round" strokeLinejoin="round"/>
          <path d="M300.31 175.651C276.911 216.453 262.613 238.934 257.416 243.093" stroke="#000000" strokeOpacity="0.9" strokeWidth="16" strokeLinecap="round" strokeLinejoin="round"/>
        </motion.svg>
      )
    },
    { 
      title: "תרומה", 
      url: "/#תרומה",
      icon: (
        <motion.svg 
          width="20" 
          height="20" 
          viewBox="0 0 24 24" 
          fill="none" 
          className="shrink-0"
          whileHover={{ 
            scale: 1.2,
            rotate: 15,
            transition: { duration: 0.3, ease: "easeInOut" }
          }}
          animate={{
            y: [0, -3, 0],
            transition: { 
              duration: 2, 
              repeat: Infinity, 
              ease: "easeInOut" 
            }
          }}
        >
          <path d="M10.1497 8.80219L9.70794 9.40825L10.1497 8.80219ZM12 3.10615L11.4925 3.65833C11.7794 3.9221 12.2206 3.9221 12.5075 3.65833L12 3.10615ZM13.8503 8.8022L14.2921 9.40826L13.8503 8.8022ZM12 9.67598L12 10.426H12L12 9.67598ZM10.5915 8.19612C9.90132 7.69298 9.16512 7.08112 8.60883 6.43627C8.03452 5.77053 7.75 5.18233 7.75 4.71476H6.25C6.25 5.73229 6.82845 6.66885 7.47305 7.41607C8.13569 8.18419 8.97435 8.87349 9.70794 9.40825L10.5915 8.19612ZM7.75 4.71476C7.75 3.65612 8.27002 3.05231 8.8955 2.84182C9.54754 2.62238 10.5199 2.76435 11.4925 3.65833L12.5075 2.55398C11.2302 1.37988 9.70254 0.987559 8.41707 1.42016C7.10502 1.8617 6.25 3.09623 6.25 4.71476H7.75ZM14.2921 9.40826C15.0257 8.8735 15.8643 8.18421 16.527 7.41608C17.1716 6.66886 17.75 5.73229 17.75 4.71475H16.25C16.25 5.18234 15.9655 5.77055 15.3912 6.43629C14.8349 7.08113 14.0987 7.69299 13.4085 8.19613L14.2921 9.40826ZM17.75 4.71475C17.75 3.09622 16.895 1.8617 15.5829 1.42016C14.2975 0.987559 12.7698 1.37988 11.4925 2.55398L12.5075 3.65833C13.4801 2.76435 14.4525 2.62238 15.1045 2.84181C15.73 3.0523 16.25 3.65612 16.25 4.71475H17.75ZM9.70794 9.40825C10.463 9.95869 11.0618 10.426 12 10.426L12 8.92598C11.635 8.92598 11.4347 8.81074 10.5915 8.19612L9.70794 9.40825ZM13.4085 8.19613C12.5653 8.81074 12.365 8.92598 12 8.92598L12 10.426C12.9382 10.426 13.537 9.9587 14.2921 9.40826L13.4085 8.19613Z" fill="#1C274C"/>
          <path d="M5 20.3884H7.25993C8.27079 20.3884 9.29253 20.4937 10.2763 20.6964C12.0166 21.0549 13.8488 21.0983 15.6069 20.8138C16.4738 20.6734 17.326 20.4589 18.0975 20.0865C18.7939 19.7504 19.6469 19.2766 20.2199 18.7459C20.7921 18.216 21.388 17.3487 21.8109 16.6707C22.1736 16.0894 21.9982 15.3762 21.4245 14.943C20.7873 14.4619 19.8417 14.462 19.2046 14.9433L17.3974 16.3084C16.697 16.8375 15.932 17.3245 15.0206 17.4699C14.911 17.4874 14.7962 17.5033 14.6764 17.5172M14.6764 17.5172C14.6403 17.5214 14.6038 17.5254 14.5668 17.5292M14.6764 17.5172C14.8222 17.486 14.9669 17.396 15.1028 17.2775C15.746 16.7161 15.7866 15.77 15.2285 15.1431C15.0991 14.9977 14.9475 14.8764 14.7791 14.7759C11.9817 13.1074 7.62942 14.3782 5 16.2429M14.6764 17.5172C14.6399 17.525 14.6033 17.5292 14.5668 17.5292M14.5668 17.5292C14.0434 17.5829 13.4312 17.5968 12.7518 17.5326" stroke="#1C274C" strokeWidth="1.5" strokeLinecap="round"/>
          <rect x="2" y="14" width="3" height="8" rx="1.5" stroke="#1C274C" strokeWidth="1.5"/>
        </motion.svg>
      )
    },
    { 
      title: "ייעוד העמותה", 
      url: "#ייעוד-העמותה",
      icon: (
        <motion.svg 
          width="20" 
          height="20" 
          viewBox="0 0 24 24" 
          fill="none" 
          className="shrink-0"
          whileHover={{ 
            scale: 1.2,
            rotate: 15,
            transition: { duration: 0.3, ease: "easeInOut" }
          }}
          animate={{
            y: [0, -3, 0],
            transition: { 
              duration: 2, 
              repeat: Infinity, 
              ease: "easeInOut" 
            }
          }}
        >
          <path d="M14 13a3.954 3.954 0 0 0 .142 1H9.858A3.954 3.954 0 0 0 10 13zm-3.5-4h3a2.486 2.486 0 0 1 1.945.949 3.992 3.992 0 0 1 .839-.547A3.485 3.485 0 0 0 13.5 8h-3a3.485 3.485 0 0 0-2.784 1.402 3.992 3.992 0 0 1 .84.547A2.486 2.486 0 0 1 10.5 9zM9 4a3 3 0 1 1 3 3 3.003 3.003 0 0 1-3-3zm1 0a2 2 0 1 0 2-2 2.002 2.002 0 0 0-2 2zM4.5 17h3a3.504 3.504 0 0 1 3.5 3.5V23H1v-2.5A3.504 3.504 0 0 1 4.5 17zm0 1A2.503 2.503 0 0 0 2 20.5V22h8v-1.5A2.503 2.503 0 0 0 7.5 18zM6 16a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm0-1a2 2 0 1 0-2-2 2.002 2.002 0 0 0 2 2zm17 5.5V23H13v-2.5a3.504 3.504 0 0 1 3.5-3.5h3a3.504 3.504 0 0 1 3.5 3.5zm-1 0a2.503 2.503 0 0 0-2.5-2.5h-3a2.503 2.503 0 0 0-2.5 2.5V22h8zM21 13a3 3 0 1 1-3-3 3.003 3.003 0 0 1 3 3zm-1 0a2 2 0 1 0-2 2 2.002 2.002 0 0 0 2-2z" fill="#1C274C"/>
        </motion.svg>
      )
    },
    { 
      title: "טפסים", 
      url: "/forms-download",
      icon: (
        <motion.svg 
          width="20" 
          height="20" 
          viewBox="0 0 512.001 512.001" 
          className="shrink-0"
          whileHover={{ 
            scale: 1.2,
            rotate: 15,
            transition: { duration: 0.3, ease: "easeInOut" }
          }}
          animate={{
            y: [0, -3, 0],
            transition: { 
              duration: 2, 
              repeat: Infinity, 
              ease: "easeInOut" 
            }
          }}
        >
          <path d="M463.996,126.864L340.192,3.061C338.231,1.101,335.574,0,332.803,0H95.726C67.724,0,44.944,22.782,44.944,50.784v410.434
			c0,28.001,22.781,50.783,50.783,50.783h320.547c28.002,0,50.783-22.781,50.783-50.783V134.253
			C467.056,131.482,465.955,128.824,463.996,126.864z M343.255,35.679l88.127,88.126H373.14c-7.984,0-15.49-3.109-21.134-8.753
			c-5.645-5.643-8.752-13.148-8.751-21.131V35.679z M446.158,461.217c0,16.479-13.406,29.885-29.884,29.885H95.726
			c-16.479,0-29.885-13.406-29.885-29.885V50.784c0.001-16.479,13.407-29.886,29.885-29.886h226.631v73.021
			c-0.002,13.565,5.28,26.318,14.871,35.909c9.592,9.592,22.345,14.874,35.911,14.874h73.018V461.217z" fill="#000000"/>
          <path d="M147.789,303.745h-4.678c-5.77,0-10.449,4.678-10.449,10.449s4.679,10.449,10.449,10.449h4.678
			c5.77,0,10.449-4.678,10.449-10.449C158.238,308.423,153.559,303.745,147.789,303.745z" fill="#000000"/>
          <path d="M368.889,303.745H181.593c-5.77,0-10.449,4.678-10.449,10.449s4.679,10.449,10.449,10.449h187.296
			c5.77,0,10.449-4.678,10.449-10.449C379.338,308.423,374.659,303.745,368.889,303.745z" fill="#000000"/>
          <path d="M147.789,256h-4.678c-5.77,0-10.449,4.678-10.449,10.449c0,5.771,4.679,10.449,10.449,10.449h4.678
			c5.77,0,10.449-4.678,10.449-10.449C158.238,260.678,153.559,256,147.789,256z" fill="#000000"/>
          <path d="M368.889,256H181.593c-5.77,0-10.449,4.678-10.449,10.449c0,5.771,4.679,10.449,10.449,10.449h187.296
			c5.77,0,10.449-4.678,10.449-10.449C379.338,260.678,374.659,256,368.889,256z" fill="#000000"/>
          <path d="M147.789,208.255h-4.678c-5.77,0-10.449,4.678-10.449,10.449c0,5.771,4.679,10.449,10.449,10.449h4.678
			c5.77,0,10.449-4.678,10.449-10.449S153.559,208.255,147.789,208.255z" fill="#000000"/>
          <path d="M368.889,208.255H181.593c-5.77,0-10.449,4.678-10.449,10.449c0,5.771,4.679,10.449,10.449,10.449h187.296
			c5.77,0,10.449-4.678,10.449-10.449S374.659,208.255,368.889,208.255z" fill="#000000"/>
        </motion.svg>
      )
    },
    { 
      title: "דרושים", 
      url: "/drushim",
      icon: (
        <motion.svg 
          width="20" 
          height="20" 
          viewBox="0 0 24 24" 
          fill="none" 
          className="shrink-0"
          whileHover={{ 
            scale: 1.2,
            rotate: 15,
            transition: { duration: 0.3, ease: "easeInOut" }
          }}
          animate={{
            y: [0, -3, 0],
            transition: { 
              duration: 2, 
              repeat: Infinity, 
              ease: "easeInOut" 
            }
          }}
        >
          <path d="M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" stroke="#000000" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
          <rect width="20" height="14" x="2" y="6" rx="2" stroke="#000000" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
        </motion.svg>
      )
    },
    { 
      title: "תקנון האתר", 
      url: "/website-terms",
      icon: (
        <motion.svg 
          xmlns="http://www.w3.org/2000/svg" 
          width="20" 
          height="20" 
          viewBox="0 0 24 24" 
          fill="none" 
          stroke="currentColor" 
          strokeWidth="2" 
          strokeLinecap="round" 
          strokeLinejoin="round" 
          className="shrink-0"
          whileHover={{ 
            scale: 1.2,
            rotate: 15,
            transition: { duration: 0.3, ease: "easeInOut" }
          }}
          animate={{
            y: [0, -3, 0],
            transition: { 
              duration: 2, 
              repeat: Infinity, 
              ease: "easeInOut" 
            }
          }}
        >
          <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
          <circle cx="12" cy="12" r="4"/>
        </motion.svg>
      )
    },
  ];

  // Generic smooth scroll or navigate for any hash id
  const goToSectionById = (id: string): void => {
    try {
      const el = typeof document !== 'undefined' ? document.getElementById(id) : null;
      if (el && pathname === '/') {
        el.scrollIntoView({ behavior: 'smooth', block: 'start' });
      } else {
        router.push(`/#${id}`, { scroll: true });
      }
    } catch {}
  };

  const toggleMenu = (): void => {
    setIsMenuOpen(!isMenuOpen);
    if (isMenuOpen) {
      setIsMobileMenuDropdownOpen(false);
    }
  };

  const closeMenu = (): void => {
    setIsMenuOpen(false);
    setIsMobileMenuDropdownOpen(false);
  };

  const toggleMobileMenuDropdown = (): void => {
    setIsMobileMenuDropdownOpen(!isMobileMenuDropdownOpen);
  };

  // Handle logo click: scroll to top if already on home, otherwise navigate home and ensure scroll top
  const handleLogoClick: React.MouseEventHandler<HTMLAnchorElement> = (e) => {
    try {
      if (pathname === "/") {
        e.preventDefault();
        if (typeof window !== 'undefined') {
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      } else {
        e.preventDefault();
        router.push("/", { scroll: true });
        // After navigation, Next.js will scroll to top when scroll: true
      }
    } catch {}
  };

  return (
    <nav className={`fixed top-0 right-0 left-0 border-b shadow-lg backdrop-blur-xl z-[999999] bg-white/30 border-gray-200/40 ${className}`}>
      <div className="px-6 mx-auto max-w-7xl sm:px-8 lg:px-12">
        <div className="flex justify-between items-center h-20">
          {/* Logo and Donate - בצד שמאל */}
          <div className="flex items-center space-x-4">
            {/* Logo - הכי ימין */}
          <div className="flex-shrink-0">
              <Link href="/" className="flex gap-2 items-center" onClick={handleLogoClick} scroll>
                <motion.div
                  whileHover={{ 
                    scale: 1.1,
                    rotate: 5,
                    transition: { 
                      duration: 0.4, 
                      ease: "easeInOut",
                      type: "spring",
                      stiffness: 300
                    }
                  }}
                  whileTap={{ 
                    scale: 0.95,
                    transition: { duration: 0.1 }
                  }}
                  className="h-16 flex items-center"
                >
                  <Image
                    src="/logo.png"
                    alt="כיף לתת"
                    width={144}
                    height={64}
                    priority
                    className="w-auto h-16"
                  />
                </motion.div>
              </Link>
            </div>
            
            <button onClick={goToDonationSection} className="px-[14px] py-2 font-semibold font-staff text-[#2b2e3a] bg-[#f4a282] rounded-lg transition-all duration-300 hover:scale-105 hover:bg-[#e0ccbc] flex items-center gap-2 relative overflow-hidden group cursor-pointer">
                              <span className="relative z-10">הצטרפו לנתינה</span>
              <div className="relative z-10 w-4 h-4 transition-all duration-300 group-hover:translate-x-1 group-hover:scale-110">
                {/* Default icon (click icon) */}
                <svg 
                  className="w-full h-full group-hover:hidden" 
                  fill="none"
                  stroke="#2b2e3a"
                  strokeWidth="1.91"
                  viewBox="0 0 24 24"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path d="M17.07,20.61H9.79a2,2,0,0,1-2-2,2,2,0,0,1,2-2h1.87L5,9.86a2,2,0,0,1-.19-2.65,1.88,1.88,0,0,1,1.47-.68,1.84,1.84,0,0,1,1.35.55l4.06,4.06,4.08-3.06a1.91,1.91,0,0,1,2.5.18h0A17.18,17.18,0,0,1,22.42,15l.06.19"/>
                  <path d="M10.63,10.12A4.73,4.73,0,0,0,11,8.17,4.78,4.78,0,1,0,6.26,13a4.67,4.67,0,0,0,1.55-.26"/>
                </svg>
                {/* Hover icon (arrow) */}
                <svg 
                  className="hidden w-full h-full group-hover:block" 
                  fill="#2b2e3a"
                  viewBox="0 0 198.204 198.204"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path d="M114.799,168.906c-1.582,0-5.261-0.716-5.261-7.383v-30.624H8.181
					c-0.279,0.043-0.655,0.082-1.102,0.082c-1.8,0-3.464-0.68-4.688-1.933C0.805,127.427,0,124.947,0,121.686V74.614
					c0-6.51,4.617-8.231,7.057-8.231h100.34V38.317
					c0-7.848,3.736-9.019,5.962-9.019c3.572,0,7.129,3.396,7.805,4.08
					c2.441,1.8,66.982,50.455,74.075,57.541c2.577,2.58,3.028,5.175,2.956,6.893c-0.172,4.134-3.357,6.947-3.715,7.258
				l-71.792,59.413C121.91,165.334,118.267,168.906,114.799,168.906z M7.437,125.215l0.476,0.004h107.301v36.3
				c0,0.716,0.057,1.21,0.118,1.535c0.916-0.437,2.426-1.585,3.493-2.716l72.01-59.624c0.426-0.372,1.646-1.75,1.7-3.16
				c0.025-0.859-0.401-1.718-1.299-2.623c-6.811-6.803-73.116-56.778-73.782-57.283c-1.492-1.449-3.26-2.595-4.008-2.666
				c0.032,0.14-0.361,0.981-0.361,3.335v33.741H7.086C6.152,72.094,5.68,72.957,5.68,74.61v47.076c0,2.412,0.591,3.203,0.769,3.389
				c0.068,0.068,0.225,0.229,0.63,0.229L7.437,125.215z"/>
                </svg>
              </div>
              <div className="absolute inset-0 bg-[#e0ccbc] transform -translate-x-full transition-transform duration-300 group-hover:translate-x-0"></div>
            </button>
          </div>

                      {/* Music toggle removed */}

          {/* Auth Buttons - בצד ימין */}
          <div className="hidden items-center space-x-4 md:flex">
            <div className="relative group">
              <motion.button 
                className="flex gap-2 items-center px-4 py-2 font-semibold font-staff text-gray-800 rounded-lg transition-all duration-300 cursor-pointer hover:text-[#f5a383] hover:bg-[#f5a383]/10"
                whileHover={!isMobile ? { scale: 1.05 } : {}}
                transition={{ duration: 0.3, ease: "easeInOut" }}
                onMouseEnter={() => !isMobile && setIsMenuButtonHovered(true)}
                onMouseLeave={() => !isMobile && setIsMenuButtonHovered(false)}
              >
                תפריט
                <motion.svg 
                  width="20" 
                  height="20" 
                  viewBox="0 0 1024 1024" 
                  className="shrink-0" 
                  xmlns="http://www.w3.org/2000/svg"
                  animate={isMenuButtonHovered ? {
                    rotate: 360,
                    scale: 1.1,
                    transition: { 
                      duration: 0.6, 
                      ease: "easeInOut",
                      type: "spring",
                      stiffness: 200
                    }
                  } : {
                    rotate: 0,
                    scale: 1,
                    transition: { 
                      duration: 0.3, 
                      ease: "easeInOut"
                    }
                  }}
                >
                  <path d="M993.763 493.538v35c0 13.331-6.04 26.664-18.135 37.137-140.15 121.422-280.35 242.795-420.49 364.219-11.814 10.237-25.813 15.501-42.454 15.501v-35c16.643 0 30.64-5.264 42.454-15.501 140.141-121.424 280.336-242.802 420.49-364.217 12.095-10.475 18.135-23.803 18.135-37.139z" fill="#E8C142" />
                  <path d="M30.239 528.367v-3.5-1.75-3.5-3.5-1.75-3.5-3.5-1.75-3.5-3.5-1.75-3.5c0 14.707 6.701 29.313 19.037 40.019 138.449 120.064 277.049 239.996 415.562 360.02 13.002 11.26 28.74 16.466 47.852 16.994v35c-19.108-0.528-34.85-5.734-47.852-16.994C326.325 808.382 187.725 688.45 49.276 568.386c-12.337-10.705-19.037-25.312-19.037-40.019z" fill="#E8C142" />
                  <path d="M510.786 76.601c16.263 0 32.546 5.362 44.946 16.097 139.95 121.188 279.901 242.376 419.819 363.586 24.241 20.995 24.295 53.413 0.079 74.397-140.15 121.42-280.35 242.796-420.489 364.217-11.815 10.239-25.813 15.502-42.452 15.502-19.109-0.528-34.852-5.734-47.854-16.994-138.511-120.024-277.111-239.956-415.56-360.02-19.581-16.988-24.96-43.81-11.895-65.251 3.919-6.438 8.669-11.829 14.465-16.849C189.954 331.734 328.024 212.152 466.107 92.567c12.296-10.639 28.478-15.966 44.679-15.966z" fill="#F6DB82" />
                </motion.svg>
              </motion.button>
              
              {/* Dropdown Menu */}
              <div className="absolute right-0 top-full invisible z-50 mt-2 w-72 rounded-xl border shadow-2xl opacity-0 backdrop-blur-xl transition-all duration-500 ease-out scale-95 bg-white/95 border-gray-200/50 group-hover:opacity-100 group-hover:visible group-hover:scale-100">
                <div className="p-3">
              {menuItems.map((item, index) => (
                <a
                  key={index}
                      href={item.url}
                       className="block px-4 py-4 text-base font-medium font-bold font-staff text-gray-700 rounded-lg transition-all duration-300 cursor-pointer hover:bg-gradient-to-r hover:from-[#9acdbe]/10 hover:to-[#9acdbe]/5 hover:shadow-md hover:scale-105 hover:translate-x-1 active:scale-95 menu-item"
                      style={{
                        animationDelay: `${index * 100}ms`,
                         transform: 'translateX(0)'
                       }}
                       onMouseEnter={(e) => {
                         if (!isMobile) {
                           e.currentTarget.style.setProperty('color', '#f5a383', 'important');
                         }
                       }}
                       onMouseLeave={(e) => {
                         if (!isMobile) {
                           e.currentTarget.style.removeProperty('color');
                         }
                       }}
                       onClick={(e) => {
                         if (item.url.startsWith('#') || item.url.startsWith('/#')) {
                           e.preventDefault();
                           const id = item.url.replace('/#', '').replace('#', '');
                           goToSectionById(id);
                           closeMenu();
                         }
                       }}
                    >
                      <div className="flex justify-between items-center">
                        <span className="font-bold font-staff text-gray-800 transition-all duration-300">{item.title}</span>
                        <div className="flex gap-2 items-center">
                          {item.icon && (
                            <div className="flex-shrink-0">
                              {item.icon}
                            </div>
                          )}
                          {!item.icon && (
                            <div className="w-1 h-6 bg-gradient-to-b from-blue-500 to-indigo-600 rounded-full opacity-0 transition-all duration-300 transform scale-y-0 group-hover:opacity-100 group-hover:scale-y-100"></div>
                          )}
                        </div>
                      </div>
                </a>
              ))}
                </div>
                {/* Decorative bottom border */}
                <div className="h-1 bg-[#9acdbe] rounded-b-xl"></div>
              </div>
            </div>
            <Link href="/contact-form">
              <motion.button 
                className="flex gap-2 items-center px-4 py-2 font-semibold font-staff text-gray-800 rounded-lg transition-all duration-300 cursor-pointer hover:text-[#f5a383] hover:bg-[#f5a383]/10"
                whileHover={!isMobile ? { scale: 1.05 } : {}}
                transition={{ duration: 0.3, ease: "easeInOut" }}
                onMouseEnter={() => !isMobile && setIsContactButtonHovered(true)}
                onMouseLeave={() => !isMobile && setIsContactButtonHovered(false)}
              >
                צור קשר
                <motion.svg 
                  width="20" 
                  height="20" 
                  viewBox="0 0 1024 1024" 
                  className="shrink-0" 
                  xmlns="http://www.w3.org/2000/svg"
                  animate={isContactButtonHovered ? {
                    rotate: 360,
                    scale: 1.1,
                    transition: { 
                      duration: 0.6, 
                      ease: "easeInOut",
                      type: "spring",
                      stiffness: 200
                    }
                  } : {
                    rotate: 0,
                    scale: 1,
                    transition: { 
                      duration: 0.3, 
                      ease: "easeInOut"
                    }
                  }}
                >
                  <path d="M120.791847 866.352377c-2.977459 0-5.170621-0.901019-5.709184-1.308526-3.105444-2.409202-3.760731-5.940583-3.760731-10.808133 0-34.688211 16.850081-63.506487 17.010831-63.782937l1.17542-1.612619c11.070248-13.029965 33.250676-25.087238 73.340906-39.248596 28.398483-10.037148 48.200426-20.017982 58.888764-29.662982 8.439887-7.612587 18.492393-22.892028 19.015599-40.890908l-0.841634-13.714944-1.889069-11.025197-4.343321-3.483258c-5.44707-4.388373-10.213256-14.077399-12.709489-25.914538l-2.03446-9.573328-9.588686-1.934119c-6.288704-1.261427-14.277057-4.953557-20.322076-22.33913-3.123874-8.992785-4.632057-17.302638-4.632057-25.391332 0-3.837522 0.988049-11.317004 0.988049-11.317005 0.115699-0.930712 0.651191-3.587694 1.639241-6.580511l2.427632-7.40781-4.691443-6.218056c-28.615547-37.826419-43.128098-78.440879-43.128097-120.711984 0-142.312893 163.926088-258.101013 365.418529-258.101012 201.4607 0 365.359144 115.78812 365.359144 258.101012 0 142.2832-163.898443 258.040603-365.359144 258.040604-33.62849 0-68.113971-3.64708-102.46942-10.837826l-16.906394-3.543668-1.278833 22.297151c0.46382 17.474651 9.659334 32.697778 18.548707 40.613435 10.546019 9.558993 30.359224 19.554162 58.802758 29.592334 39.525045 13.958629 62.301374 26.292351 73.894828 40.018558l1.148799 1.626954h-0.015358c-0.045051 0 17.023117 28.036028 17.023117 62.997616 0 7.033068-4.894172 11.941575-11.90881 11.941575l-459.780825-0.086007-3.313293 0.265187z" fill="#FFFFFF" />
                  <path d="M441.530069 675.187867l-0.291808 5.054922c0.348121 11.504376 7.264466 23.010799 13.598221 28.646263 6.274369 5.693826 20.684531 14.961012 53.861488 26.670165 42.764618 15.107428 66.760395 28.413842 80.300254 44.44891l1.803062 2.469611c0.92764 1.481562 19.869519 32.363991 19.869519 71.759003 0 15.282512-11.504376 26.816581-26.783816 26.816581l-459.780825-0.086006c-1.511255 0.202729-2.441966 0.262115-3.314317 0.262114-5.578127 0-11.096869-1.597261-14.698897-4.328987-9.645-7.496888-9.645-18.506727-9.645-22.662678 0-39.364295 18.941879-71.119075 19.116963-71.40781l1.743676-2.499304c13.768186-16.329947 37.823348-29.662982 80.587967-44.77041 33.063305-11.67946 47.530805-20.946646 53.864559-26.670165 4.706801-4.241957 13.711872-15.978754 14.119378-30.273217l-0.811941-12.316317-0.699313-3.893836c-8.249444-6.625562-14.698898-19.057578-17.95383-34.426096-14.698898-2.963124-24.983826-13.452829-31.433279-32.046587-3.718751-10.719055-5.462428-20.625146-5.462428-30.270145 0-4.474379 1.103748-13.190715 1.103748-13.190715 0.173037-1.33617 0.871326-5.114307 2.263811-9.356264-29.225783-38.638361-46.132177-82.739149-46.132178-129.687363 0-150.520358 170.592606-272.974995 380.293536-272.974995 209.638472 0 380.23415 122.454637 380.234149 272.974995C927.282768 563.919177 756.687091 686.344121 547.048619 686.344121c-36.666357 0-71.934087-4.126258-105.51855-11.156254z" fill="#27323A" />
                  <path d="M345.019662 369.499736c3.367559 0 6.505767 0.175084 9.412578 0.434127 2.26381-0.259043 5.28632-0.404435 8.481866-0.404434 44.508295 0 99.824724 25.188603 121.788087 95.814165 3.367559 10.950454 5.054922 22.951413 5.054922 35.705952 0 9.468891-1.975075 19.610476-3.951173 29.428512 7.321804 3.284624 9.936807 16.591038 10.692434 22.080087 0.752556 0 1.103748 12.985938 1.103749 13.104709 0 9.701313-1.803062 19.580783-5.405091 30.270146-2.439919 6.972659-9.645 27.658214-31.261267 32.1029-0.348121 1.832755-1.219447 3.197594-1.684291 4.967892 28.122034 5.230006 57.291503 8.716336 87.797143 8.716335 185.002768 0 335.610156-102.410034 335.610155-228.291615 0-125.914346-150.606364-228.351001-335.610155-228.351001-185.062153 0-335.669541 102.436655-335.669541 228.351001 0 18.998192 3.890764 37.329835 10.400627 54.965236 0.348121-1.133441 0.46382-2.410226 0.871326-3.543667 23.647655-70.307134 78.731662-95.350345 122.368631-95.350345z" fill="#FFFFFF" />
                  <path d="M288.251364 837.067208c-19.87259-20.976339-33.818932-47.878926-38.989553-75.304717-10.808133 5.345705-23.12445 10.489705-36.722671 15.282512-12.200618 4.27165-48.631481 17.141888-60.718448 30.852736-1.451869 2.877118-6.390068 14.469547-9.12077 29.169469h145.551442z" fill="#79CCBF" />
                  <path d="M290.806982 774.836482c9.18118-10.168205 19.580783-18.331643 30.913145-24.257891l5.866863-3.052202-4.997584-4.299294c-9.061385-7.669925-16.850081-14.961012-23.416257-21.817973l-3.890765-4.126258-3.078823 4.8225c-3.314317 5.200314-7.205081 10.025885-12.027581 14.848385a45.98269 45.98269 0 0 1-2.790087 3.48633l-1.336171 1.508183 0.232422 2.004767a142.086614 142.086614 0 0 0 7.029997 29.401891l2.499304 7.029997 4.995537-5.548435zM407.130593 804.556802l-1.859375-2.671317c-20.21764-28.821348-44.157102-35.270802-52.698354-36.57728-6.85696 1.306478-30.852736 7.785624-51.017134 36.633594l-1.859376 2.674388 1.975075 2.615003c13.830643 17.953829 31.436351 31.200858 45.903851 34.601181l0.523205 0.115699 12.783208-0.262115c13.47945-3.400323 30.852736-16.939159 44.272802-34.544867l1.976098-2.584286zM416.023037 774.777097l4.994513 5.551506 2.499304-7.033068c3.778137-10.516326 5.869935-21.205689 6.333755-31.751708 0 0-4.590078-6.307134-5.054922-6.886653-3.426944-3.48633-6.85696-7.901323-9.936807-12.753515l-3.02251-4.881885-3.951173 4.15595c-6.566177 6.913274-14.4675 14.321084-23.58827 22.050394l-5.05697 4.299295 5.869935 3.052202c11.388676 5.925224 21.78828 14.058969 30.913145 24.197482z" fill="#FFFFFF" />
                  <path d="M418.054426 837.067208h146.367479c-3.430016-17.924136-10.283904-30.097109-10.344314-30.243524-11.156254-12.461708-47.994625-25.507031-60.079543-29.779705-13.654535-4.852193-26.03126-10.022813-36.898779-15.398211-5.168573 27.486202-19.172253 54.445102-39.044843 75.42144z" fill="#79CCBF" />
                  <path d="M454.777097 584.660022c3.022509-9.353192 4.706801-19.259283 2.90681-29.573904-0.815013-5.027277-2.441966-8.19313-5.173692-10.77844-1.859376-0.902043-5.810549 0.318428-5.982562-2.180876 5.518742-21.728894 7.261395-44.157102 1.451869-63.44915-24.403283-81.549394-95.87355-72.570944-95.87355-72.570944s-70.131025-9.356264-96.802214 72.570944c-6.218056 19.146656-4.123186 41.720255 1.511255 63.44915-0.115699 2.499304-4.126258 1.278833-5.926249 2.180876-2.847425 2.58531-4.414994 5.75014-5.286319 10.77844-1.803062 10.314621-0.175084 20.220711 3.019437 29.573904 4.766186 14.149071 9.996192 20.07532 26.090646 15.196506 0 36.633593 14.119379 39.974531 17.198202 43.259155 9.12077 9.876398 16.850081 33.873198 16.850081 45.435935 4.241957 4.706801 16.269538 19.173277 44.392596 41.66087 25.855152-20.628218 37.767034-34.223367 43.288847-41.66087h0.1157c0-0.056314 0.056314-0.115699 0.056313-0.173036 0.523205-0.755627 1.338218-1.743677 1.803062-2.383605-0.699314-0.493513-0.930712-2.499304-1.047434-4.679156 1.803062-12.985938 7.612587-29.544211 14.063065-38.201162 2.148111-2.963124 17.138816-6.101333 17.138816-43.259155 16.153839 4.879837 21.382821-1.046411 26.205321-15.195482z" fill="#F4CE73" />
                  <path d="M752.448206 540.907354c0 20.512519-16.677044 37.186491-37.186491 37.186491-20.512519 0-37.186491-16.673973-37.186491-37.186491 0-20.509447 16.674996-37.186491 37.186491-37.186491 20.508423 0 37.186491 16.678068 37.186491 37.186491zM573.136193 437.308589h208.245988c8.19313 0 14.875006-6.625562 14.875006-14.875006 0-8.19313-6.681876-14.875006-14.875006-14.875006H573.136193c-8.249444 0-14.815621 6.681876-14.815621 14.875006 0 8.249444 6.566177 14.875006 14.815621 14.875006zM770.750156 488.730158c0 16.442574 13.307438 29.748988 29.748988 29.748988 16.386261 0 29.750012-13.307438 29.750012-29.748988 0-16.442574-13.363751-29.750012-29.750012-29.750012-16.442574 0.001024-29.748988 13.307438-29.748988 29.750012zM599.225815 523.013934c-24.579391 0-44.56768 20.045627-44.567681 44.680308 0 24.579391 19.988289 44.56768 44.567681 44.567681 24.576319 0 44.623994-19.988289 44.623994-44.567681 0-24.635705-20.047675-44.680308-44.623994-44.680308zM573.136193 372.46286h208.245988c8.19313 0 14.875006-6.681876 14.875006-14.875006 0-8.249444-6.681876-14.875006-14.875006-14.875006H573.136193c-8.249444 0-14.815621 6.625562-14.815621 14.875006 0 8.194154 6.566177 14.875006 14.815621 14.875006zM358.207305 307.561841h423.174876c8.19313 0 14.875006-6.625562 14.875006-14.875006 0-8.19313-6.681876-14.875006-14.875006-14.875006H358.207305c-8.19313 0-14.875006 6.681876-14.875006 14.875006 0.001024 8.249444 6.681876 14.875006 14.875006 14.875006z" fill="#27323A" />
                </motion.svg>
              </motion.button>
            </Link>
          </div>

          {/* Mobile menu button */}
          <div className="flex gap-2 items-center lg:hidden">
            <button
              onClick={toggleMenu}
              className="text-gray-800 transition-colors duration-200 cursor-pointer hover:text-[#f5a383] focus:outline-none focus:text-[#f5a383]"
              aria-label={isMenuOpen ? "סגור תפריט" : "פתח תפריט"}
            >
              <motion.div
                className="w-7 h-7 flex flex-col justify-center items-center"
                animate={isMenuOpen ? "open" : "closed"}
              >
                <motion.span
                  className="w-6 h-0.5 bg-current block rounded-full"
                  variants={{
                    closed: { rotate: 0, y: 0 },
                    open: { rotate: 45, y: 6 }
                  }}
                  transition={{ duration: 0.3 }}
                />
                <motion.span
                  className="w-6 h-0.5 bg-current block rounded-full mt-1.5"
                  variants={{
                    closed: { opacity: 1 },
                    open: { opacity: 0 }
                  }}
                  transition={{ duration: 0.3 }}
                />
                <motion.span
                  className="w-6 h-0.5 bg-current block rounded-full mt-1.5"
                  variants={{
                    closed: { rotate: 0, y: 0 },
                    open: { rotate: -45, y: -6 }
                  }}
                  transition={{ duration: 0.3 }}
                />
              </motion.div>
            </button>
          </div>
        </div>
      </div>

      {/* Mobile Menu */}
      {isMenuOpen && (
        <div className="border-t backdrop-blur-xl bg-white/95 border-gray-200/30 lg:hidden">
          <div className="px-4 pt-4 pb-6 space-y-2">
            {/* Mobile Auth Buttons */}
            <div className="pt-4 mt-4 space-y-3 border-t">
              <div className="space-y-2">
                <motion.button 
                  className="flex gap-1 justify-center items-center px-4 py-3 w-full font-semibold font-staff text-gray-800 rounded-lg border border-gray-300 cursor-pointer hover:bg-[#f5a383]/10 hover:text-[#f5a383]"
                  onClick={toggleMobileMenuDropdown}
                                      whileHover={!isMobile ? { scale: 1.02 } : {}}
                  transition={{ duration: 0.3, ease: "easeInOut" }}
                                  onMouseEnter={() => !isMobile && setIsMobileMenuButtonHovered(true)}
                onMouseLeave={() => !isMobile && setIsMobileMenuButtonHovered(false)}
                >
                  <motion.svg 
                    width="20" 
                    height="20" 
                    viewBox="0 0 1024 1024" 
                    className="shrink-0" 
                    xmlns="http://www.w3.org/2000/svg"
                    animate={isMobileMenuButtonHovered ? {
                      rotate: 360,
                      scale: 1.1,
                      transition: { 
                        duration: 0.6, 
                        ease: "easeInOut",
                        type: "spring",
                        stiffness: 200
                      }
                    } : {
                      rotate: 0,
                      scale: 1,
                      transition: { 
                        duration: 0.3, 
                        ease: "easeInOut"
                      }
                    }}
                  >
                    <path d="M993.763 493.538v35c0 13.331-6.04 26.664-18.135 37.137-140.15 121.422-280.35 242.795-420.49 364.219-11.814 10.237-25.813 15.501-42.454 15.501v-35c16.643 0 30.64-5.264 42.454-15.501 140.141-121.424 280.336-242.802 420.49-364.217 12.095-10.475 18.135-23.803 18.135-37.139z" fill="#E8C142" />
                    <path d="M30.239 528.367v-3.5-1.75-3.5-3.5-1.75-3.5-3.5-1.75-3.5-3.5-1.75-3.5c0 14.707 6.701 29.313 19.037 40.019 138.449 120.064 277.049 239.996 415.562 360.02 13.002 11.26 28.74 16.466 47.852 16.994v35c-19.108-0.528-34.85-5.734-47.852-16.994C326.325 808.382 187.725 688.45 49.276 568.386c-12.337-10.705-19.037-25.312-19.037-40.019z" fill="#E8C142" />
                    <path d="M510.786 76.601c16.263 0 32.546 5.362 44.946 16.097 139.95 121.188 279.901 242.376 419.819 363.586 24.241 20.995 24.295 53.413 0.079 74.397-140.15 121.42-280.35 242.796-420.489 364.217-11.815 10.239-25.813 15.502-42.452 15.502-19.109-0.528-34.852-5.734-47.854-16.994-138.511-120.024-277.111-239.956-415.56-360.02-19.581-16.988-24.96-43.81-11.895-65.251 3.919-6.438 8.669-11.829 14.465-16.849C189.954 331.734 328.024 212.152 466.107 92.567c12.296-10.639 28.478-15.966 44.679-15.966z" fill="#F6DB82" />
                  </motion.svg>
                  תפריט
                </motion.button>
                {/* Mobile Menu Items */}
                <div 
                  className={`ml-4 space-y-1 transition-all duration-300 ease-in-out overflow-hidden ${
                    isMobileMenuDropdownOpen ? 'max-h-screen opacity-100' : 'max-h-0 opacity-0'
                  }`}
                >
            {menuItems.map((item, index) => (
              <a
                key={index}
                href={item.url}
                className="block px-4 py-3 text-base text-gray-600 rounded-lg transition-all duration-300 cursor-pointer hover:bg-gradient-to-r hover:from-[#9acdbe]/10 hover:to-[#9acdbe]/5 hover:shadow-sm hover:scale-105 active:scale-95 menu-item"
                onClick={(e) => {
                  if (item.url.startsWith('#') || item.url.startsWith('/#')) {
                    e.preventDefault();
                    const id = item.url.replace('/#', '').replace('#', '');
                    goToSectionById(id);
                    closeMenu();
                  } else {
                    closeMenu();
                  }
                }}
                style={{
                  animationDelay: `${index * 100}ms`,
                }}
              >
                      <div className="flex justify-between items-center">
                        <span className="font-bold font-staff text-gray-800 transition-all duration-300">{item.title}</span>
                        <div className="flex gap-2 items-center">
                          {item.icon && (
                            <div className="flex-shrink-0">
                              {item.icon}
                            </div>
                          )}
                          {!item.icon && (
                            <div className="w-1 h-6 bg-gradient-to-b from-blue-500 to-indigo-600 rounded-full opacity-0 transition-all duration-300 transform scale-y-0"></div>
                          )}
                        </div>
                      </div>
              </a>
            ))}
                </div>
              </div>
              <Link href="/contact-form">
                <motion.button 
                  className="flex gap-1 justify-center items-center px-4 py-3 w-full font-semibold font-staff text-gray-800 rounded-lg border border-gray-300 cursor-pointer hover:bg-[#f5a383]/10 hover:text-[#f5a383]"
                  whileHover={{
                    scale: 1.02,
                    transition: { 
                      duration: 0.3, 
                      ease: "easeInOut"
                    }
                  }}
                  onMouseEnter={() => !isMobile && setIsMobileContactButtonHovered(true)}
                  onMouseLeave={() => !isMobile && setIsMobileContactButtonHovered(false)}
                  onClick={closeMenu}
                >
                  <motion.svg 
                    width="20" 
                    height="20" 
                    viewBox="0 0 1024 1024" 
                    className="shrink-0" 
                    xmlns="http://www.w3.org/2000/svg"
                    animate={isMobileContactButtonHovered ? {
                      rotate: 360,
                      scale: 1.1,
                      transition: { 
                        duration: 0.6, 
                        ease: "easeInOut",
                        type: "spring",
                        stiffness: 200
                      }
                    } : {
                      rotate: 0,
                      scale: 1,
                      transition: { 
                        duration: 0.3, 
                        ease: "easeInOut"
                      }
                    }}
                  >
                    <path d="M120.791847 866.352377c-2.977459 0-5.170621-0.901019-5.709184-1.308526-3.105444-2.409202-3.760731-5.940583-3.760731-10.808133 0-34.688211 16.850081-63.506487 17.010831-63.782937l1.17542-1.612619c11.070248-13.029965 33.250676-25.087238 73.340906-39.248596 28.398483-10.037148 48.200426-20.017982 58.888764-29.662982 8.439887-7.612587 18.492393-22.892028 19.015599-40.890908l-0.841634-13.714944-1.889069-11.025197-4.343321-3.483258c-5.44707-4.388373-10.213256-14.077399-12.709489-25.914538l-2.03446-9.573328-9.588686-1.934119c-6.288704-1.261427-14.277057-4.953557-20.322076-22.33913-3.123874-8.992785-4.632057-17.302638-4.632057-25.391332 0-3.837522 0.988049-11.317004 0.988049-11.317005 0.115699-0.930712 0.651191-3.587694 1.639241-6.580511l2.427632-7.40781-4.691443-6.218056c-28.615547-37.826419-43.128098-78.440879-43.128097-120.711984 0-142.312893 163.926088-258.101013 365.418529-258.101012 201.4607 0 365.359144 115.78812 365.359144 258.101012 0 142.2832-163.898443 258.040603-365.359144 258.040604-33.62849 0-68.113971-3.64708-102.46942-10.837826l-16.906394-3.543668-1.278833 22.297151c0.46382 17.474651 9.659334 32.697778 18.548707 40.613435 10.546019 9.558993 30.359224 19.554162 58.802758 29.592334 39.525045 13.958629 62.301374 26.292351 73.894828 40.018558l1.148799 1.626954h-0.015358c-0.045051 0 17.023117 28.036028 17.023117 62.997616 0 7.033068-4.894172 11.941575-11.90881 11.941575l-459.780825-0.086007-3.313293 0.265187z" fill="#FFFFFF" />
                    <path d="M441.530069 675.187867l-0.291808 5.054922c0.348121 11.504376 7.264466 23.010799 13.598221 28.646263 6.274369 5.693826 20.684531 14.961012 53.861488 26.670165 42.764618 15.107428 66.760395 28.413842 80.300254 44.44891l1.803062 2.469611c0.92764 1.481562 19.869519 32.363991 19.869519 71.759003 0 15.282512-11.504376 26.816581-26.783816 26.816581l-459.780825-0.086006c-1.511255 0.202729-2.441966 0.262115-3.314317 0.262114-5.578127 0-11.096869-1.597261-14.698897-4.328987-9.645-7.496888-9.645-18.506727-9.645-22.662678 0-39.364295 18.941879-71.119075 19.116963-71.40781l1.743676-2.499304c13.768186-16.329947 37.823348-29.662982 80.587967-44.77041 33.063305-11.67946 47.530805-20.946646 53.864559-26.670165 4.706801-4.241957 13.711872-15.978754 14.119378-30.273217l-0.811941-12.316317-0.699313-3.893836c-8.249444-6.625562-14.698898-19.057578-17.95383-34.426096-14.698898-2.963124-24.983826-13.452829-31.433279-32.046587-3.718751-10.719055-5.462428-20.625146-5.462428-30.270145 0-4.474379 1.103748-13.190715 1.103748-13.190715 0.173037-1.33617 0.871326-5.114307 2.263811-9.356264-29.225783-38.638361-46.132177-82.739149-46.132178-129.687363 0-150.520358 170.592606-272.974995 380.293536-272.974995 209.638472 0 380.23415 122.454637 380.234149 272.974995C927.282768 563.919177 756.687091 686.344121 547.048619 686.344121c-36.666357 0-71.934087-4.126258-105.51855-11.156254z" fill="#27323A" />
                    <path d="M345.019662 369.499736c3.367559 0 6.505767 0.175084 9.412578 0.434127 2.26381-0.259043 5.28632-0.404435 8.481866-0.404434 44.508295 0 99.824724 25.188603 121.788087 95.814165 3.367559 10.950454 5.054922 22.951413 5.054922 35.705952 0 9.468891-1.975075 19.610476-3.951173 29.428512 7.321804 3.284624 9.936807 16.591038 10.692434 22.080087 0.752556 0 1.103748 12.985938 1.103749 13.104709 0 9.701313-1.803062 19.580783-5.405091 30.270146-2.439919 6.972659-9.645 27.658214-31.261267 32.1029-0.348121 1.832755-1.219447 3.197594-1.684291 4.967892 28.122034 5.230006 57.291503 8.716336 87.797143 8.716335 185.002768 0 335.610156-102.410034 335.610155-228.291615 0-125.914346-150.606364-228.351001-335.610155-228.351001-185.062153 0-335.669541 102.436655-335.669541 228.351001 0 18.998192 3.890764 37.329835 10.400627 54.965236 0.348121-1.133441 0.46382-2.410226 0.871326-3.543667 23.647655-70.307134 78.731662-95.350345 122.368631-95.350345z" fill="#FFFFFF" />
                    <path d="M288.251364 837.067208c-19.87259-20.976339-33.818932-47.878926-38.989553-75.304717-10.808133 5.345705-23.12445 10.489705-36.722671 15.282512-12.200618 4.27165-48.631481 17.141888-60.718448 30.852736-1.451869 2.877118-6.390068 14.469547-9.12077 29.169469h145.551442z" fill="#79CCBF" />
                    <path d="M290.806982 774.836482c9.18118-10.168205 19.580783-18.331643 30.913145-24.257891l5.866863-3.052202-4.997584-4.299294c-9.061385-7.669925-16.850081-14.961012-23.416257-21.817973l-3.890765-4.126258-3.078823 4.8225c-3.314317 5.200314-7.205081 10.025885-12.027581 14.848385a45.98269 45.98269 0 0 1-2.790087 3.48633l-1.336171 1.508183 0.232422 2.004767a142.086614 142.086614 0 0 0 7.029997 29.401891l2.499304 7.029997 4.995537-5.548435zM407.130593 804.556802l-1.859375-2.671317c-20.21764-28.821348-44.157102-35.270802-52.698354-36.57728-6.85696 1.306478-30.852736 7.785624-51.017134 36.633594l-1.859376 2.674388 1.975075 2.615003c13.830643 17.953829 31.436351 31.200858 45.903851 34.601181l0.523205 0.115699 12.783208-0.262115c13.47945-3.400323 30.852736-16.939159 44.272802-34.544867l1.976098-2.584286zM416.023037 774.777097l4.994513 5.551506 2.499304-7.033068c3.778137-10.516326 5.869935-21.205689 6.333755-31.751708 0 0-4.590078-6.307134-5.054922-6.886653-3.426944-3.48633-6.85696-7.901323-9.936807-12.753515l-3.02251-4.881885-3.951173 4.15595c-6.566177 6.913274-14.4675 14.321084-23.58827 22.050394l-5.05697 4.299295 5.869935 3.052202c11.388676 5.925224 21.78828 14.058969 30.913145 24.197482z" fill="#FFFFFF" />
                    <path d="M418.054426 837.067208h146.367479c-3.430016-17.924136-10.283904-30.097109-10.344314-30.243524-11.156254-12.461708-47.994625-25.507031-60.079543-29.779705-13.654535-4.852193-26.03126-10.022813-36.898779-15.398211-5.168573 27.486202-19.172253 54.445102-39.044843 75.42144z" fill="#79CCBF" />
                    <path d="M454.777097 584.660022c3.022509-9.353192 4.706801-19.259283 2.90681-29.573904-0.815013-5.027277-2.441966-8.19313-5.173692-10.77844-1.859376-0.902043-5.810549 0.318428-5.982562-2.180876 5.518742-21.728894 7.261395-44.157102 1.451869-63.44915-24.403283-81.549394-95.87355-72.570944-95.87355-72.570944s-70.131025-9.356264-96.802214 72.570944c-6.218056 19.146656-4.123186 41.720255 1.511255 63.44915-0.115699 2.499304-4.126258 1.278833-5.926249 2.180876-2.847425 2.58531-4.414994 5.75014-5.286319 10.77844-1.803062 10.314621-0.175084 20.220711 3.019437 29.573904 4.766186 14.149071 9.996192 20.07532 26.090646 15.196506 0 36.633593 14.119379 39.974531 17.198202 43.259155 9.12077 9.876398 16.850081 33.873198 16.850081 45.435935 4.241957 4.706801 16.269538 19.173277 44.392596 41.66087 25.855152-20.628218 37.767034-34.223367 43.288847-41.66087h0.1157c0-0.056314 0.056314-0.115699 0.056313-0.173036 0.523205-0.755627 1.338218-1.743677 1.803062-2.383605-0.699314-0.493513-0.930712-2.499304-1.047434-4.679156 1.803062-12.985938 7.612587-29.544211 14.063065-38.201162 2.148111-2.963124 17.138816-6.101333 17.138816-43.259155 16.153839 4.879837 21.382821-1.046411 26.205321-15.195482z" fill="#F4CE73" />
                    <path d="M752.448206 540.907354c0 20.512519-16.677044 37.186491-37.186491 37.186491-20.512519 0-37.186491-16.673973-37.186491-37.186491 0-20.509447 16.674996-37.186491 37.186491-37.186491 20.508423 0 37.186491 16.678068 37.186491 37.186491zM573.136193 437.308589h208.245988c8.19313 0 14.875006-6.625562 14.875006-14.875006 0-8.19313-6.681876-14.875006-14.875006-14.875006H573.136193c-8.249444 0-14.815621 6.681876-14.815621 14.875006 0 8.249444 6.566177 14.875006 14.815621 14.875006zM770.750156 488.730158c0 16.442574 13.307438 29.748988 29.748988 29.748988 16.386261 0 29.750012-13.307438 29.750012-29.748988 0-16.442574-13.363751-29.750012-29.750012-29.750012-16.442574 0.001024-29.748988 13.307438-29.748988 29.750012zM599.225815 523.013934c-24.579391 0-44.56768 20.045627-44.567681 44.680308 0 24.579391 19.988289 44.56768 44.567681 44.567681 24.576319 0 44.623994-19.988289 44.623994-44.567681 0-24.635705-20.047675-44.680308-44.623994-44.680308zM573.136193 372.46286h208.245988c8.19313 0 14.875006-6.681876 14.875006-14.875006 0-8.249444-6.681876-14.875006-14.875006-14.875006H573.136193c-8.249444 0-14.815621 6.625562-14.815621 14.875006 0 8.194154 6.566177 14.875006 14.815621 14.875006zM358.207305 307.561841h423.174876c8.19313 0 14.875006-6.625562 14.875006-14.875006 0-8.19313-6.681876-14.875006-14.875006-14.875006H358.207305c-8.19313 0-14.875006 6.681876-14.875006 14.875006 0.001024 8.249444 6.681876 14.875006 14.875006 14.875006z" fill="#27323A" />
                  </motion.svg>
                  צור קשר
                </motion.button>
              </Link>
               <motion.button 
                className="px-4 py-3 w-full font-semibold font-staff text-[#2b2e3a] bg-[#f5a383] rounded-lg hover:scale-105 hover:bg-[#e0ccbc] transition-all duration-300 flex items-center justify-center gap-2 relative overflow-hidden group cursor-pointer mt-4"
                whileHover={{
                  scale: 1.05,
                  transition: { 
                    duration: 0.3, 
                    ease: "easeInOut"
                  }
                }}
                onClick={() => { goToDonationSection(); closeMenu(); }}
              >
                <span className="relative z-10">הצטרפו לנתינה</span>
                <div className="relative z-10 w-4 h-4 transition-all duration-300 group-hover:translate-x-1 group-hover:scale-110">
                  {/* Default icon (click icon) */}
                  <svg 
                    className="w-full h-full group-hover:hidden" 
                    fill="none"
                    stroke="#2b2e3a"
                    strokeWidth="1.91"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path d="M17.07,20.61H9.79a2,2,0,0,1-2-2,2,2,0,0,1,2-2h1.87L5,9.86a2,2,0,0,1-.19-2.65,1.88,1.88,0,0,1,1.47-.68,1.84,1.84,0,0,1,1.35.55l4.06,4.06,4.08-3.06a1.91,1.91,0,0,1,2.5.18h0A17.18,17.18,0,0,1,22.42,15l.06.19"/>
                    <path d="M10.63,10.12A4.73,4.73,0,0,0,11,8.17,4.78,4.78,0,1,0,6.26,13a4.67,4.67,0,0,0,1.55-.26"/>
                  </svg>
                  {/* Hover icon (arrow) */}
                  <svg 
                    className="hidden w-full h-full group-hover:block" 
                    fill="#2b2e3a"
                    viewBox="0 0 198.204 198.204"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path d="M114.799,168.906c-1.582,0-5.261-0.716-5.261-7.383v-30.624H8.181
					c-0.279,0.043-0.655,0.082-1.102,0.082c-1.8,0-3.464-0.68-4.688-1.933C0.805,127.427,0,124.947,0,121.686V74.614
					c0-6.51,4.617-8.231,7.057-8.231h100.34V38.317c0-7.848,3.736-9.019,5.962-9.019c3.572,0,7.129,3.396,7.805,4.08
					c2.441,1.8,66.982,50.455,74.075,57.541c2.577,2.58,3.028,5.175,2.956,6.893c-0.172,4.134-3.357,6.947-3.715,7.258
				l-71.792,59.413C121.91,165.334,118.267,168.906,114.799,168.906z M7.437,125.215l0.476,0.004h107.301v36.3
				c0,0.716,0.057,1.21,0.118,1.535c0.916-0.437,2.426-1.585,3.493-2.716l72.01-59.624c0.426-0.372,1.646-1.75,1.7-3.16
				c0.025-0.859-0.401-1.718-1.299-2.623c-6.811-6.803-73.116-56.778-73.782-57.283c-1.492-1.449-3.26-2.595-4.008-2.666
				c0.032,0.14-0.361,0.981-0.361,3.335v33.741H7.086C6.152,72.094,5.68,72.957,5.68,74.61v47.076c0,2.412,0.591,3.203,0.769,3.389
				c0.068,0.068,0.225,0.229,0.63,0.229L7.437,125.215z"/>
                  </svg>
                </div>
                <div className="absolute inset-0 bg-[#e0ccbc] transform -translate-x-full transition-transform duration-300 group-hover:translate-x-0"></div>
              </motion.button>
            </div>
          </div>
        </div>
      )}
    </nav>
  );
} 
